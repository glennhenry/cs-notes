"use strict";(self.webpackChunkcs_notes=self.webpackChunkcs_notes||[]).push([[6236],{62544:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var i=n(85893),r=n(11151);const s={slug:"/computer-organization-and-architecture/cpu-design",id:"cpu-design",title:"CPU Design",description:"CPU Design"},o=void 0,c={id:"computer-organization-and-architecture/cpu-design/cpu-design",title:"CPU Design",description:"CPU Design",source:"@site/docs/computer-organization-and-architecture/06-cpu-design/cpu-design.md",sourceDirName:"computer-organization-and-architecture/06-cpu-design",slug:"/computer-organization-and-architecture/cpu-design",permalink:"/cs-notes/computer-organization-and-architecture/cpu-design",draft:!1,unlisted:!1,editUrl:"https://github.com/glennhenry/cs-notes/tree/main/docs/computer-organization-and-architecture/06-cpu-design/cpu-design.md",tags:[],version:"current",lastUpdatedBy:"glennhenry",lastUpdatedAt:1707130823,formattedLastUpdatedAt:"Feb 5, 2024",frontMatter:{slug:"/computer-organization-and-architecture/cpu-design",id:"cpu-design",title:"CPU Design",description:"CPU Design"},sidebar:"sidebar",previous:{title:"Control Unit",permalink:"/cs-notes/computer-organization-and-architecture/control-unit"},next:{title:"Input/Output",permalink:"/cs-notes/computer-organization-and-architecture/input-output"}},a={},l=[{value:"Instruction Set",id:"instruction-set",level:3},{value:"Microarchitecture",id:"microarchitecture",level:3},{value:"Pipelining",id:"pipelining",level:4},{value:"Forwarding",id:"forwarding",level:4},{value:"Out-of-order Execution",id:"out-of-order-execution",level:4},{value:"Prediction",id:"prediction",level:4},{value:"Superscalar",id:"superscalar",level:4},{value:"Cache &amp; Memory",id:"cache--memory",level:4},{value:"Performance Evaluation",id:"performance-evaluation",level:3},{value:"Multiprocessing &amp; Parallel Computing",id:"multiprocessing--parallel-computing",level:3}];function h(e){const t={a:"a",admonition:"admonition",br:"br",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Main Source :"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.a,{href:"https://youtu.be/rtAlC5J1U40?si=wae6I4lznG73wuzx",children:"Advanced CPU Designs - Crash Course Computer Science #9"})})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Instruction_pipelining",children:"Instruction pipelining - Wikipedia"})})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Microarchitecture",children:"Microarchitecture - Wikipedia"})})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.strong,{children:"Various Google searches"})}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"There are many things to consider when designing a CPU, such as, in what format should the instructions be, how will each component talk to each other, how will the circuit be structured to lead an efficient execution of instructions, various technique will be employed to facilitate efficient execution of instructions."}),"\n",(0,i.jsx)(t.h3,{id:"instruction-set",children:"Instruction Set"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Instruction Set"})," is a collection of instructions that CPU can execute. Instruction set is very important to implement the CPU, it will include the format of the instruction."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.img,{alt:"Instruction set",src:n(41805).Z+"",width:"597",height:"570"}),(0,i.jsx)(t.br,{}),"\n","Source : ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Instruction_set_architecture",children:"top"}),", ",(0,i.jsx)(t.a,{href:"http://mayurkalablogs.blogspot.com/2012/02/8086-instruction-set.html",children:"bottom"})]}),"\n",(0,i.jsx)(t.p,{children:"An instruction may contain :"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Opcode"})," : The operation code or the type of instruction to be executed, such as adding number, subtracting, loading data from memory, etc."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Operand"})," : They are the data or values on which the instruction operates. They can be registers, or memory addresses."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Addressing Modes"})," : Specify how the operands are going to be accessed, we can provide a register that contains the operand, provide the operand from the memory, or even include a value directly (called ",(0,i.jsx)(t.strong,{children:"immediate value"}),")."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"microarchitecture",children:"Microarchitecture"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Microarchitecture"})," is the implementation and design of the internal components and structures of the CPU. It focuses on how the CPU executes instructions, manages data, and performs computations at the hardware level."]}),"\n",(0,i.jsx)(t.h4,{id:"pipelining",children:"Pipelining"}),"\n",(0,i.jsx)(t.p,{children:"Pipeline is the technique used to improve the performance of processors by overlapping the execution of multiple instructions. It is known as achieving parallelism on the instruction-level. The execution of instruction is broke down into a series of smaller stages to enable the concurrent processing of multiple instructions."}),"\n",(0,i.jsx)(t.p,{children:"In pipeline, stage is often divided by 5 :"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Instruction Fetch (IF)"})," : First stage is to fetch an instruction from memory, typically from the ",(0,i.jsx)(t.a,{href:"/computer-organization-and-architecture/registers-and-ram#type-of-registers",children:"program counter (PC)"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Instruction Decode (ID)"})," : Fetched instruction is decoded, also fetch the operand and register allocation if required."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Execution (EX)"})," : Stage that executes the instruction."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Memory Access (MEM)"})," : If the instruction requires memory access, this stage will handle the operation."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Write Back (WB)"})," : Final stage that will write the result of the instruction execution to the appropriate registers or memory locations."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"The pipeline stages work in parallel, meaning while one instruction is progressing through a stage, the next instruction is entering the pipeline and moving to the subsequent stage. The overlap between instruction execution allows multiple instructions to be processed simultaneously."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.img,{alt:"Pipelining",src:n(86802).Z+"",width:"1002",height:"313"}),(0,i.jsx)(t.br,{}),"\n","Source : ",(0,i.jsx)(t.a,{href:"https://cs.stanford.edu/people/eroberts/courses/soco/projects/risc/pipelining/index.html",children:"left"}),", ",(0,i.jsx)(t.a,{href:"https://stackpointer.io/hardware/how-pipelining-improves-cpu-performance/113/",children:"right"})]}),"\n",(0,i.jsx)(t.p,{children:"Pipelining can be likened to doing laundry. Instead of waiting for the washing machine to complete the entire wash cycle before using the dryer, we can start washing a portion of the clothes and transfer the already washed portion to the dryer. This approach enhances the efficiency of the laundry process by overlapping washing and drying tasks, similar to execution of tasks in CPU."}),"\n",(0,i.jsxs)(t.p,{children:["However, problems may happen during the pipeline process, these are called ",(0,i.jsx)(t.strong,{children:"hazards"}),"."]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Structural Hazards"})," : Arise when multiple instructions require the same hardware resource simultaneously. It's when two instructions need to access the same functional unit or register simultaneously."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Data Hazards"})," : Occur when an instruction depends on the result of a previous instruction that is not yet available. Data hazards can be further classified into three types : ",(0,i.jsx)(t.strong,{children:"read-after-write (RAW)"}),", ",(0,i.jsx)(t.strong,{children:"write-after-read (WAR)"}),", and ",(0,i.jsx)(t.strong,{children:"write-after-write (WAW)"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Control Hazards"})," : Arise due to conditional branches or jumps that affect the sequential execution of instructions. Control hazards occur when the outcome of a branch or jump instruction is not known in the early stages of the pipeline, causing a potential misprediction. For example, we didn't know that some expression returns false, yet we keep executing the branch that only needs to be executed when the expression returns true."]}),"\n"]}),"\n",(0,i.jsx)(t.h4,{id:"forwarding",children:"Forwarding"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Forwarding"})," is the technique to mitigate data hazards, it will bypass the normal data flow and directly forward the necessary data from the producing instruction to the dependent instruction, avoiding the need to wait for the data to be written to a register or memory."]}),"\n",(0,i.jsx)(t.h4,{id:"out-of-order-execution",children:"Out-of-order Execution"}),"\n",(0,i.jsx)(t.p,{children:"This technique dynamically order and execute instruction based on their availability of operands, rather than strictly following the sequential order of the program."}),"\n",(0,i.jsx)(t.h4,{id:"prediction",children:"Prediction"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Prediction"})," is the technique to make educated guesses or predictions about future events, such as the outcome of a branch instruction or the behavior of memory accesses."]}),"\n",(0,i.jsx)(t.p,{children:"Many techniques to predict which branch will likely to be executed, one of them is having a branch history, we can store the history of branch outcomes seen during program execution."}),"\n",(0,i.jsx)(t.p,{children:"Another use of prediction is to predict the outcome of memory access instructions (loads and stores) in order to optimize the handling of memory dependencies. The speculation can be based on many principles, such as, temporal, which suggests that if a memory location is accessed once, it is likely to be accessed again in the near future. Another is spatial principle, which suggests that if a memory location is accessed, nearby memory locations are also likely to be accessed in the near future."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.img,{alt:"Branch history",src:n(80071).Z+"",width:"420",height:"306"}),(0,i.jsx)(t.br,{}),"\n","Source : ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Branch_predictor",children:"https://en.wikipedia.org/wiki/Branch_predictor"})]}),"\n",(0,i.jsx)(t.h4,{id:"superscalar",children:"Superscalar"}),"\n",(0,i.jsx)(t.p,{children:"Superscalar is an instruction-level parallelism that allows the execution of multiple instructions in parallel within a single clock cycle. It can be employed with pipelining, where each stage of the pipeline can handle multiple instructions simultaneously."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.img,{alt:"Superscalar",src:n(56086).Z+"",width:"800",height:"467"}),(0,i.jsx)(t.br,{}),"\n","Source : ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Superscalar_processor",children:"https://en.wikipedia.org/wiki/Superscalar_processor"})]}),"\n",(0,i.jsx)(t.h4,{id:"cache--memory",children:"Cache & Memory"}),"\n",(0,i.jsx)(t.p,{children:"Memory is the place for storing data and instructions that are actively used by the CPU during program execution. The commonly used memory for random access is the RAM."}),"\n",(0,i.jsxs)(t.p,{children:["Depending on the hardware architecture, the RAM placement can vary. Often times, accessing data from RAM can introduce delay. ",(0,i.jsx)(t.strong,{children:"Cache"})," is a small and fast memory component that sits between the CPU and main memory."]}),"\n",(0,i.jsx)(t.p,{children:"Cache typically organize the structure of their memory for more efficient retrieval of data. It may operate on the principle of locality, the temporal locality (recently accessed data is likely to be accessed again) and spatial locality (data located near recently accessed data is likely to be accessed soon)."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.img,{alt:"Memory and cache",src:n(50686).Z+"",width:"812",height:"213"}),(0,i.jsx)(t.br,{}),"\n","Source : ",(0,i.jsx)(t.a,{href:"https://www.cloudeka.id/id/berita/web-dev/apa-itu-cache-memory/",children:"https://www.cloudeka.id/id/berita/web-dev/apa-itu-cache-memory/"})]}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsxs)(t.p,{children:["More about ",(0,i.jsx)(t.a,{href:"/backend-development/caching",children:"caching"}),", some may relate to backend development. It includes type of caching, cache invalidation, cache replacement."]})}),"\n",(0,i.jsx)(t.h3,{id:"performance-evaluation",children:"Performance Evaluation"}),"\n",(0,i.jsx)(t.p,{children:"Many aspects and metrics are used to evaluate the performance in CPU design :"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Instruction Execution Time"})," : This metric measures the time taken to execute a single instruction or a sequence of instructions."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Instruction Throughput"})," : Refers to the number of instructions executed per unit of time (e.g., each clock cycle)."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Clock Frequency"})," : Determines the rate at which instructions are executed. Higher clock frequencies generally lead to faster instruction execution, but they come with trade-offs such as increased power consumption and heat generation."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Cycles Per Instruction (CPI)"})," : CPI measures the average number of clock cycles required to execute one instruction. A lower CPI indicates better efficiency and shorter execution times."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Cache Performance"})," : Evaluating cache performance involve measuring how useful our cache is. For example, how many times have we used the cache (cache hit), how many times the cache doesn't have data we need (cache miss)."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Branch Prediction Accuracy"})," : The accuracy of branch prediction, branch instructions are important because they significantly impact CPU performance."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"multiprocessing--parallel-computing",children:"Multiprocessing & Parallel Computing"}),"\n",(0,i.jsx)(t.p,{children:"Multiprocessing is the technique that utilize multiple processors or CPU cores to execute multiple tasks or processes concurrently. It involves dividing the workload among the processors or cores to achieve parallel execution, thereby improving overall system performance and efficiency."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Multicore"})," is when a single CPU contains multiple cores or multiple processing unit. These cores are typically identical and share the same resources. Each core execute instructions independently and perform computational tasks concurrently."]}),"\n",(0,i.jsxs)(t.p,{children:["While ",(0,i.jsx)(t.strong,{children:"multiprocessor"})," is when a system consists of multiple independent processors, each with its own instruction execution capabilities, registers, cache, and memory subsystem. These processors can be housed on a single chip or on separate chips, interconnected via a system interconnect, such as a shared bus or a high-speed interconnect."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.img,{alt:"Multicore vs multiprocessor",src:n(40851).Z+"",width:"694",height:"431"}),(0,i.jsx)(t.br,{}),"\n","Source : ",(0,i.jsx)(t.a,{href:"https://www.scaler.com/topics/operating-system/difference-between-multicore-and-multiprocessor-system/",children:"https://www.scaler.com/topics/operating-system/difference-between-multicore-and-multiprocessor-system/"})]}),"\n",(0,i.jsx)(t.p,{children:"Overall, the primary difference is about how they share resources."}),"\n",(0,i.jsxs)(t.p,{children:["Multiple unit of processing in hardware-level plays a role for concurrency in the software-level. ",(0,i.jsx)(t.a,{href:"/computer-and-programming-fundamentals/concurrency-and-parallelism#process--thread",children:"Threading"}),", is implemented in the hardware-level by having specific hardware that capable of processing concurrently, and utilized in the software-level by operating system to schedule their execution."]})]})}function d(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},80071:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/branch-history-e0a016d003303fb9b0b91cc1b1c406cf.png"},41805:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/instruction-set-99d0f730b73263fdf751786d2419b3af.png"},50686:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/memory-cache-43a45ffc1b8da67c0576224fbdec2407.png"},40851:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/multicore-multiprocessor-08204b655abe5893cc849e5a6e958df5.png"},86802:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/pipelining-1b8e5de09cdb279aa5450a6647862856.png"},56086:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/superscalar-1c862e825d2dd62c90a1df9e915805fe.png"},11151:(e,t,n)=>{n.d(t,{Z:()=>c,a:()=>o});var i=n(67294);const r={},s=i.createContext(r);function o(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);