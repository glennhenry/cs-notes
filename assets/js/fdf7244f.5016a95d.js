"use strict";(self.webpackChunkcs_notes=self.webpackChunkcs_notes||[]).push([[2840],{96629:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>l});var n=a(85893),s=a(11151);const o={slug:"/database-system/transactions",id:"transactions",title:"Transactions",description:"Transactions"},i=void 0,r={id:"database-system/transactions/transactions",title:"Transactions",description:"Transactions",source:"@site/docs/database-system/05-transactions/transactions.md",sourceDirName:"database-system/05-transactions",slug:"/database-system/transactions",permalink:"/cs-notes/database-system/transactions",draft:!1,unlisted:!1,editUrl:"https://github.com/glennhenry/cs-notes/tree/main/docs/database-system/05-transactions/transactions.md",tags:[],version:"current",lastUpdatedBy:"glennhenry",lastUpdatedAt:1707313610,formattedLastUpdatedAt:"Feb 7, 2024",frontMatter:{slug:"/database-system/transactions",id:"transactions",title:"Transactions",description:"Transactions"},sidebar:"sidebar",previous:{title:"Normalization",permalink:"/cs-notes/database-system/normalization"},next:{title:"Concurrency Control",permalink:"/cs-notes/database-system/concurrency-control"}},c={},l=[{value:"Two purpose of Transactions",id:"two-purpose-of-transactions",level:3},{value:"Transactions State",id:"transactions-state",level:3},{value:"ACID",id:"acid",level:3}];function d(e){const t={a:"a",admonition:"admonition",br:"br",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Main Source :"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.strong,{children:(0,n.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Database_transaction",children:"Database transaction - Wikipedia"})})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.strong,{children:(0,n.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/ACID",children:"ACID - Wikipedia"})})}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Transaction"})," is a technique to group together related database operation."]}),"\n",(0,n.jsx)(t.h3,{id:"two-purpose-of-transactions",children:"Two purpose of Transactions"}),"\n",(0,n.jsx)(t.p,{children:"Database operation often times includes more than one related operation. For example, in a customer database, maybe we store the count of order a customer has and the total amount of money the customer has spent on the orders. The count of order and amount of money is related, if the customer order an item, the total money would also increase."}),"\n",(0,n.jsx)(t.p,{children:"So, let's say the customer order something, we want to increase the count of order and amount of money spent. However, there is a possibility of system fails in one of the operation. In a real application that is integrated with a DBMS, it can be a very bad situation if somehow other component of the app causes the whole app to crash in the middle of database operation. We may have increased the count of order, but the app immediately crash before we get the chance to update the amount of money spent."}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsx)(t.p,{children:"In some cases, a partial change can be worse than no change at all."})}),"\n",(0,n.jsx)(t.p,{children:"The purpose of transaction is to group these operations together. Grouping them allows the operation to be treated as a whole, if some operation failed, then we would reverse the chance and decide to not execute the subsequent operation."}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsx)(t.p,{children:"An analogy would be sending several mails together in a box rather than sending each mail on its own. If some mail get lost, you would lose some piece of information, resulting in incomplete message. On the other hand, with a box of mail, you would either send all the information or lose all the information."})}),"\n",(0,n.jsxs)(t.p,{children:["Another purpose of transactions is to control concurrency in the case of multiple database operation. Transaction allows us to isolate a group of operation. Whenever a group of operation is on the fly, other group of operation shouldn't do anything. This will prevent concurrency issues such as ",(0,n.jsx)(t.a,{href:"/computer-and-programming-fundamentals/concurrency-and-parallelism#race-condition",children:"data races"}),", that is when two or more database operation access the same data, and at least one of them is writing. This makes the other operation that reads the data, accidentally read the data before update or after the update, causing unexpected behavior."]}),"\n",(0,n.jsx)(t.h3,{id:"transactions-state",children:"Transactions State"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.img,{alt:"State of transactions",src:a(50847).Z+"",width:"540",height:"273"}),(0,n.jsx)(t.br,{}),"\n","Source : ",(0,n.jsx)(t.a,{href:"https://www.scaler.com/topics/dbms/transaction-in-dbms/",children:"https://www.scaler.com/topics/dbms/transaction-in-dbms/"})]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Active"})," : The transaction is in progress and actively performing database operations."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Partially Committed"})," : In partially committed state, all database operation has been completed, but only on memory (volatile memory such as RAM). Changes made by the database operations are not permanently saved to the database, they are instead performed on memory. This mean other unit of transactions cannot see the changes made by this transaction until it is fully committed. In the case of failure, it will go to the failed state."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Committed"})," : If there is no failure, the database changes will be permanently stored on the real database (non-volatile memory such as hard disk). The changes made by the transaction are now visible to other transactions."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Terminated"})," : The terminated state indicates the end of transaction."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Failed"})," : In failed state, the transaction will be rolled back."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Aborted"})," : The transaction has been aborted or rolled back. This means that all the changes made by the transaction are discarded."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["The ability to roll back is possible because when transaction begins, the DBMS keep tracks an ",(0,n.jsx)(t.strong,{children:"undo log"}),", which is a record of the original values of any data that the transaction modifies. When the system needs to roll back, the data in the log will be applied to the database again."]}),"\n",(0,n.jsx)(t.h3,{id:"acid",children:"ACID"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"ACID (atomicity, consistency, isolation, durability)"})," is a set of properties that guarantee reliable and predictable behavior of database transactions."]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Atomicity"})," : Atomicity ensures that a transaction is treated as a single, indivisible unit of work. It means that either all the operations within the transaction are successfully completed, or none of them are."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Consistency"})," : Consistency ensures that a transaction brings the database from one consistent state to another. It means that the data must satisfy certain constraints defined by the database schema before and after the transaction."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Isolation"})," : Isolation ensures that concurrent transactions do not interfere with each other. Each transaction operates as if it is the only transaction running on the database, and the intermediate states of a transaction are not visible to other transactions until it is committed."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Durability"})," : Durability ensures that once a transaction is committed, its effects are permanent and will survive any subsequent failures, such as power outages or system crashes. The changes made by the committed transaction are stored in non-volatile memory (such as a hard disk) to make it persistent."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},50847:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/transactions-state-b2a1cf2aa9c3431df7ff87b4d48e75d4.png"},11151:(e,t,a)=>{a.d(t,{Z:()=>r,a:()=>i});var n=a(67294);const s={},o=n.createContext(s);function i(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);