"use strict";(self.webpackChunkcs_notes=self.webpackChunkcs_notes||[]).push([[8125],{58036:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var n=r(85893),t=r(11151);const a={slug:"/backend-development/message-broker",id:"message-broker",title:"Message Broker",description:"Message Broker"},o=void 0,i={id:"backend-development/message-broker/message-broker",title:"Message Broker",description:"Message Broker",source:"@site/docs/backend-development/13-message-broker/message-broker.md",sourceDirName:"backend-development/13-message-broker",slug:"/backend-development/message-broker",permalink:"/cs-notes/backend-development/message-broker",draft:!1,unlisted:!1,editUrl:"https://github.com/glennhenry/cs-notes/tree/main/docs/backend-development/13-message-broker/message-broker.md",tags:[],version:"current",lastUpdatedBy:"glennhenry",lastUpdatedAt:1705820722,formattedLastUpdatedAt:"Jan 21, 2024",frontMatter:{slug:"/backend-development/message-broker",id:"message-broker",title:"Message Broker",description:"Message Broker"},sidebar:"sidebar",previous:{title:"Search Engine",permalink:"/cs-notes/backend-development/search-engine"},next:{title:"Monolithic",permalink:"/cs-notes/backend-development/monolithic"}},c={},d=[{value:"Message Queue",id:"message-queue",level:3},{value:"Message Brokers Model",id:"message-brokers-model",level:3},{value:"Messaging Protocol",id:"messaging-protocol",level:3},{value:"RabbitMQ",id:"rabbitmq",level:3},{value:"Apache Kafka",id:"apache-kafka",level:3}];function h(e){const s={a:"a",br:"br",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Main Source :"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.a,{href:"https://youtu.be/57Qr9tk6Uxc?si=15e0ZO1DEojThNbE",children:"Introduction to Message Brokers - Ciaran O'Donnell"})})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.a,{href:"https://www.ibm.com/topics/message-brokers",children:"What are message brokers? - IBM"})})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.a,{href:"https://www.cloudamqp.com/blog/amqp-vs-mqtt.html",children:"AMQP vs MQTT: Messaging protocols compared by Nyior Clement - CloudAMQP"})})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.a,{href:"https://youtu.be/NQ3fZtyXji0?si=DT53wVxB3ISfKh2Q",children:"RabbitMQ in 100 Seconds - Fireship"})})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.a,{href:"https://youtu.be/uvb00oaa3k8?si=ffpDezF-OvA7MRwk",children:"Kafka in 100 Seconds - Fireship"})})}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Message Broker"})," is a software that bridges communication and data exchange between different applications, services, or components within a distributed system. A unit of data exchanged is called a ",(0,n.jsx)(s.strong,{children:"message"}),", it consists of headers, body, and metadata."]}),"\n",(0,n.jsx)(s.p,{children:"An example use case of message broker is to decouple between APIs and backend services. Consider an e-commerce app, when a user place an order, the message brokers send a message to the order processing service. The message contains information about the order such as customer's information, product ID or quantity. After processing the order, the service sends a message back to the message broker containing the result of the order."}),"\n",(0,n.jsx)(s.p,{children:"The use of message broker here is not just as an interface to the service, more uses are :"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Load Balance"})," : It can provide load balancing technique, the messages received may be distributed among servers."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Protocol Translator"})," : When a service uses different messaging protocol with the client, the message broker can act as a bridge, receiving messages using one protocol and translating them into another protocol."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.img,{alt:"Message brokers",src:r(66154).Z+"",width:"554",height:"181"}),(0,n.jsx)(s.br,{}),"\n","Source : ",(0,n.jsx)(s.a,{href:"https://www.vmware.com/topics/glossary/content/message-brokers.html",children:"https://www.vmware.com/topics/glossary/content/message-brokers.html"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"message-queue",children:"Message Queue"}),"\n",(0,n.jsxs)(s.p,{children:["Message broker may store messages received from the client in something called ",(0,n.jsx)(s.strong,{children:"message queue"}),", which is a ",(0,n.jsx)(s.a,{href:"/data-structures-and-algorithms/queue",children:"queue data structure"})," that is used to store messages until they can be processed by the intended service. By using queue, this ensures the messages are processed in appropriate request order."]}),"\n",(0,n.jsx)(s.p,{children:"Another benefits of message queue :"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Asynchronous Communication"})," : Message queues also enable asynchronous communication patterns, where the sender and receiver do not need to be active at the same time. For example, the messages can be held while the user or the service is down."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Fault Tolerance"})," : Message queues can provide fault tolerance by storing messages persistently. If the service fails, the messages in the queue remain, ensuring that no data is lost. Once the failed component becomes available again, it can resume processing messages from the queue."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.img,{alt:"Message queue",src:r(87184).Z+"",width:"521",height:"241"}),(0,n.jsx)(s.br,{}),"\n","Source : ",(0,n.jsx)(s.a,{href:"https://ademcatamak.medium.com/what-is-message-broker-4f6698c73089",children:"https://ademcatamak.medium.com/what-is-message-broker-4f6698c73089"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"message-brokers-model",children:"Message Brokers Model"}),"\n",(0,n.jsx)(s.p,{children:"There are several pattern used to define how messages are processed in message brokers :"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Publish-Subscribe (one to many)"})," : In the publish-subscribe pattern, a message sender (publisher) sends messages to the message broker and the recipients (subscribers) express interest in receiving messages from specific criteria. They both don't know who sent and who receipt the message, all message are handled by the message broker."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Point-to-Point Messaging (one to one)"})," : In the point-to-point pattern, messages are sent from a sender to a specific recipient. The sender puts messages into a message queue, and the broker ensures that each message is delivered to exactly one recipient. Once a message is consumed by a recipient, it is removed from the queue."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Request-Reply (one to one)"})," : The request-reply pattern involves a sender (requester) sending a request message to a recipient (replier) and expecting a response in return. The message broker acts as a mediator, routing the request message to the appropriate recipient and forwarding the response back to the requester."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.img,{alt:"Message model",src:r(87599).Z+"",width:"688",height:"314"}),(0,n.jsx)(s.br,{}),"\n","Source : ",(0,n.jsx)(s.a,{href:"https://medium.com/tech-sauce/introduction-to-message-queuing-4a7ab8968b59",children:"https://medium.com/tech-sauce/introduction-to-message-queuing-4a7ab8968b59"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"messaging-protocol",children:"Messaging Protocol"}),"\n",(0,n.jsxs)(s.p,{children:["Messaging protocol is a set of rules that define how message brokers deliver messages. It involves the structure of a message, message broker model, and the network transport layer used. Two common protocols are ",(0,n.jsx)(s.strong,{children:"Advanced Message Queuing Protocol (AMQP)"})," and ",(0,n.jsx)(s.strong,{children:"Message Queue Telemetry Transport (MQTT)"}),". AMQP is designed to be flexible that allows any pattern to be implemented on top of it while MQTT only supports the publish-subscribe pattern. MQTT is more lightweight than AMQP, typically used for Internet of Things (IoT)."]}),"\n",(0,n.jsxs)(s.p,{children:["As explained before, the message brokers can be used as converting one protocol to another, such as converting ",(0,n.jsx)(s.a,{href:"/backend-development/rest-api",children:"REST API"})," from application call to desired messaging protocol like AMQP."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.img,{alt:"Message protocol",src:r(68400).Z+"",width:"686",height:"510"}),(0,n.jsx)(s.br,{}),"\n","Source : ",(0,n.jsx)(s.a,{href:"https://www.cloudamqp.com/blog/amqp-vs-mqtt.html",children:"https://www.cloudamqp.com/blog/amqp-vs-mqtt.html"})]}),"\n",(0,n.jsx)(s.h3,{id:"rabbitmq",children:"RabbitMQ"}),"\n",(0,n.jsx)(s.p,{children:"RabbitMQ is an open-source message broker, it follows the similar traditional message broker system. It uses the AMQP protocol and provide features like message queuing, publish-subscribe, and request-reply patterns."}),"\n",(0,n.jsxs)(s.p,{children:["Messages from producers are received by ",(0,n.jsx)(s.strong,{children:"exchanges"}),", these will be held in ",(0,n.jsx)(s.strong,{children:"queue"})," until it will be consumed by the consumers. Exchanges and queue are connected together by a ",(0,n.jsx)(s.strong,{children:"binding"}),", it will determine how message should be delivered from exchanges to queue, which is called ",(0,n.jsx)(s.strong,{children:"routing"}),". Each message will have a ",(0,n.jsx)(s.strong,{children:"routing key"})," to determine which queue should receive the message."]}),"\n",(0,n.jsx)(s.p,{children:"There are types of exchange to determine the routing process :"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Direct Exchange"})," : Use the exact match between the routing key of a message and the routing key specified in the binding of the exchange and the queue."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Topic Exchange"})," : Routes messages to queues based on matching patterns in the routing key."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Fanout Exchange"})," : Routes messages to all queues that are bound to it."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"The consumer will then receive a message from a queue."}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.img,{alt:"RabbitMQ flow",src:r(47487).Z+"",width:"559",height:"342"}),(0,n.jsx)(s.br,{}),"\n","Source : ",(0,n.jsx)(s.a,{href:"https://halovina.com/konfigurasi-rabbitmq-untuk-message-broker/",children:"https://halovina.com/konfigurasi-rabbitmq-untuk-message-broker/"})]}),"\n",(0,n.jsx)(s.h3,{id:"apache-kafka",children:"Apache Kafka"}),"\n",(0,n.jsxs)(s.p,{children:["Apache Kafka on the other hand, is designed to be more scalable for real-time data streaming and processing. A unit of data produced by producers consisting of key-value pair, timestamp, and additional metadata is called a ",(0,n.jsx)(s.strong,{children:"record"}),". These records are organized into ",(0,n.jsx)(s.strong,{children:"topics"})," and topics are further divided into ",(0,n.jsx)(s.strong,{children:"partitions"}),", record are distributed within the partitions. Each partition is an ordered, immutable sequence of records. These topics are handled by a ",(0,n.jsx)(s.strong,{children:"broker"})," which is responsible for receiving records from producers and serve records to consumers. A group of broker are then grouped together to form a ",(0,n.jsx)(s.strong,{children:"Kafka Cluster"}),", the cluster act as the entry point for producers and consumers to interact with the messaging system."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.img,{alt:"Apache Kafka",src:r(68353).Z+"",width:"480",height:"288"}),(0,n.jsx)(s.br,{}),"\n","Source : ",(0,n.jsx)(s.a,{href:"https://www.projectpro.io/article/apache-kafka-architecture-/442",children:"https://www.projectpro.io/article/apache-kafka-architecture-/442"})]})]})}function l(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},68353:(e,s,r)=>{r.d(s,{Z:()=>n});const n=r.p+"assets/images/apache-kafka-67ea5d6d0e69528adda0c82387ded49c.png"},66154:(e,s,r)=>{r.d(s,{Z:()=>n});const n=r.p+"assets/images/message-broker-cda7de880f1728d7b1445b664828a064.png"},87599:(e,s,r)=>{r.d(s,{Z:()=>n});const n=r.p+"assets/images/message-model-8cf169e905d9ce911c059d0812d5486c.png"},68400:(e,s,r)=>{r.d(s,{Z:()=>n});const n=r.p+"assets/images/message-protocol-abfc08dada84ca6c67023a0cd2ac6a0b.png"},87184:(e,s,r)=>{r.d(s,{Z:()=>n});const n=r.p+"assets/images/message-queue-bde7ee5270ee0f434b1d21974b78239d.png"},47487:(e,s,r)=>{r.d(s,{Z:()=>n});const n=r.p+"assets/images/rabbitmq-db63de773049233f4e7ecaefbab56cdc.png"},11151:(e,s,r)=>{r.d(s,{Z:()=>i,a:()=>o});var n=r(67294);const t={},a=n.createContext(t);function o(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);