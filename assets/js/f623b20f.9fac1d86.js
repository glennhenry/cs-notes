"use strict";(self.webpackChunkcs_notes=self.webpackChunkcs_notes||[]).push([[4181],{93103:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var t=i(85893),n=i(11151);const r={slug:"/digital-media-processing/mp4",id:"mp4",title:"MP4",description:"MP4"},a=void 0,o={id:"digital-media-processing/mp4/mp4",title:"MP4",description:"MP4",source:"@site/docs/digital-media-processing/26-mp4/mp4.md",sourceDirName:"digital-media-processing/26-mp4",slug:"/digital-media-processing/mp4",permalink:"/cs-notes/digital-media-processing/mp4",draft:!1,unlisted:!1,editUrl:"https://github.com/glennhenry/cs-notes/tree/main/docs/digital-media-processing/26-mp4/mp4.md",tags:[],version:"current",lastUpdatedBy:"glennhenry",lastUpdatedAt:1723694829e3,frontMatter:{slug:"/digital-media-processing/mp4",id:"mp4",title:"MP4",description:"MP4"},sidebar:"sidebar",previous:{title:"AVI",permalink:"/cs-notes/digital-media-processing/avi"},next:{title:"XML",permalink:"/cs-notes/digital-media-processing/xml"}},c={},d=[{value:"MP4 Compression (H.264)",id:"mp4-compression-h264",level:3},{value:"MP4 Structure",id:"mp4-structure",level:3}];function l(e){const s={a:"a",br:"br",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,n.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Main Source:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/MP4_file_format",children:"MP4 file format \u2014 Wikipedia"})})}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"MP4 (MPEG-4 Part 14)"})," is a digital ",(0,t.jsx)(s.a,{href:"/digital-media-processing/ogg-vorbis#media-container",children:"multimedia container"})," format, commonly used to store audio and video data."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.img,{alt:"MP4 as a multimedia container",src:i(22607).Z+"",width:"812",height:"325"}),(0,t.jsx)(s.br,{}),"\n","Source: ",(0,t.jsx)(s.a,{href:"https://www.filefix.org/format/mp4.html",children:"https://www.filefix.org/format/mp4.html"}),", ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/MP4_file_format",children:"https://en.wikipedia.org/wiki/MP4_file_format"})]}),"\n",(0,t.jsx)(s.h3,{id:"mp4-compression-h264",children:"MP4 Compression (H.264)"}),"\n",(0,t.jsxs)(s.p,{children:["H.264, also known as AVC (Advanced Video Coding), is the most commonly used ",(0,t.jsx)(s.a,{href:"/digital-signal-processing/compression#lossy-compression",children:"lossy video compression"})," standard."]}),"\n",(0,t.jsx)(s.p,{children:'H.264 process each frame as "block," which is a fixed-size rectangular region within a frame of video. The block size can vary, such as 4\xd74, 16\xd716, or 32\xd732 pixels.'}),"\n",(0,t.jsx)(s.p,{children:"In H.264, there two main compression techniques."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Spatial compression"})," compresses each frame of video individually, similar to compressing an image."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Temporal compression"})," compresses multiple frames together, taking advantage of similarities between consecutive video frames. The idea is that not all pixels within each frame change. This property allows us to reference the same block of pixels from previous or future frames."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Other techniques used in H.264:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Transform Coding"}),": H.264 uses transform coding, specifically the ",(0,t.jsx)(s.a,{href:"/digital-signal-processing/discrete-cosine-transform",children:"discrete cosine transform (DCT)"}),", which converts image data from the spatial domain to the frequency domain. This conversion allows for analysis of the signals in the frequency domain, which can result in additional compression by representing the video content with fewer frequency components."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Rate Control"}),": H.264 can adjust bit rate dynamically. For example, we can use higher bit rate to complex or high-motion scenes and a lower bit rate to less complex or static scenes."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.img,{alt:"MP4 block",src:i(75369).Z+"",width:"850",height:"469"}),(0,t.jsx)(s.br,{}),"\n","Source: ",(0,t.jsx)(s.a,{href:"https://www.eetimes.com/emerging-h-264-standard-supports-broadcast-video-encoding-2/",children:"https://www.eetimes.com/emerging-h-264-standard-supports-broadcast-video-encoding-2/"})]}),"\n",(0,t.jsx)(s.h3,{id:"mp4-structure",children:"MP4 Structure"}),"\n",(0,t.jsx)(s.p,{children:"MP4 consists of a file header and multimedia data that are organized into containers called atoms or boxes. These atoms represent the actual multimedia data and can also contain other nested atoms."}),"\n",(0,t.jsx)(s.p,{children:"Atoms have variable sizes and specific types. The minimum size of an atom is 8 bytes. The first 4 bytes of an atom indicate its size, while the following 4 bytes specify the atom's type."}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"File Header"}),": This contains the file type, version, and other information about the file."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Atoms"}),": The main components of an MP4 file comes after the header, it could contain many atoms such as:","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"ftyp (file type)"}),": Specify the file type and the common data structures used."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"moov (movie)"}),": Contains the movie metadata, such as the video and audio tracks, the timecode, and the tracks properties."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"mdat (media data)"}),": Contains the media data, such as the video and audio samples."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"udta (user data)"}),": Contains the user-defined metadata."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"trak (track)"}),": Contains information about a single track, such as the track's type, the track's timecode, and the track's samples."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.img,{alt:"Structure of MP4 file",src:i(37893).Z+"",width:"473",height:"318"}),(0,t.jsx)(s.br,{}),"\n","Source: ",(0,t.jsx)(s.a,{href:"https://www.trekview.org/blog/2022/injecting-camm-gpmd-telemetry-videos-part-2-mp4-overview/",children:"https://www.trekview.org/blog/2022/injecting-camm-gpmd-telemetry-videos-part-2-mp4-overview/"})]})]})}function m(e={}){const{wrapper:s}={...(0,n.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},75369:(e,s,i)=>{i.d(s,{Z:()=>t});const t=i.p+"assets/images/mp4-block-597a3c0ba14fb2d18e1d337fa3eda366.webp"},22607:(e,s,i)=>{i.d(s,{Z:()=>t});const t=i.p+"assets/images/mp4-container-060772088d3919f43a21f5040cb663fa.png"},37893:(e,s,i)=>{i.d(s,{Z:()=>t});const t=i.p+"assets/images/mp4-structure-eb9fffb1ddff1733e547283d1a31ac3f.png"},11151:(e,s,i)=>{i.d(s,{Z:()=>o,a:()=>a});var t=i(67294);const n={},r=t.createContext(n);function a(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);